# Configuration des pages d'erreur personnalisées pour Nginx
# À intégrer dans la configuration Nginx Proxy Manager ou Nginx standard

# Pages d'erreur personnalisées
error_page 404 /errors/404.html;
error_page 403 /errors/403.html;
error_page 401 /errors/401.html;
error_page 429 /errors/429.html;
error_page 500 502 503 504 /errors/500.html;

# Localisation des pages d'erreur
location = /errors/404.html {
    internal;
    root /usr/share/nginx/html;
    # Ou si les pages sont dans le conteneur backend:
    # proxy_pass http://cookingrecipes-api:7272/errors/404.html;
}

location = /errors/403.html {
    internal;
    root /usr/share/nginx/html;
}

location = /errors/401.html {
    internal;
    root /usr/share/nginx/html;
}

location = /errors/429.html {
    internal;
    root /usr/share/nginx/html;
}

location = /errors/500.html {
    internal;
    root /usr/share/nginx/html;
}

# Alternative: Servir les pages depuis le backend
# location ~ ^/errors/(404|403|401|429|500)\.html$ {
#     proxy_pass http://cookingrecipes-api:7272$request_uri;
#     proxy_set_header Host $host;
#     proxy_set_header X-Real-IP $remote_addr;
#     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#     proxy_set_header X-Forwarded-Proto $scheme;
# }

